<%- include("header") -%>

<div class="btnCon">
  <a href="/">Back</a>
</div>

<% let preMonth; if(currMonth == 1){preMonth = 12}else{preMonth = currMonth-1}%>
<% let filteredTrans = trans.filter((tran) => { return (tran.date.split("-")[0] == currYear && tran.date.split("-")[1] == preMonth) });%>

<div class="allTrans">
  <% for(tran of filteredTrans){%>
    <div class="tranCon">
      <div class="leftCon">
        <% if(tran.type == 'in'){%>
          <span class="inAmo">Rs.<%= tran.amount%></span>
          <% currAmount += tran.amount %>
        <%}else{%>
          <span class="exAmo">Rs.<%= tran.amount%></span>
        <% currAmount -= tran.amount %>
        <%}%>
          <span><%= tran.date%></span>
      </div>
      <div class="rightCon">
        <span><%= tran.des%></span>
      </div>
    </div>
  <%}%>
</div>

  <div class="curr">
    <span>In Hand: </span>
    <span>
      <% if(currAmount >= 0){%>
        <span class="inAmo">Rs.<%= currAmount%></span>
        <%}else{%>
        <span class="exAmo">Rs.<%= currAmount*-1%></span>
      <%}%>
    </span>
  </div>
</body>
</html>
